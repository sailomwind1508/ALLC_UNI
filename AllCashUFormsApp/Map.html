<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Multiple Markers Google Maps</title>
    <style>
        #map_canvas {
            margin-left: auto;
            margin-right: auto;
            text-align: left;
            height: 100vh;
            width: 100vw;
        }

        /* Style the Image Used to Trigger the Modal */
        #myImg {
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
        }

            #myImg:hover {
                opacity: 0.7;
            }

        /* The Modal (background) */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            padding-top: 100px; /* Location of the box */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
        }

        /* Modal Content (Image) */
        .modal-content {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 700px;
        }

        /* Caption of Modal Image (Image Text) - Same Width as the Image */
        #caption {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 700px;
            text-align: center;
            color: #ccc;
            padding: 10px 0;
            height: 150px;
        }

        /* Add Animation - Zoom in the Modal */
        .modal-content, #caption {
            animation-name: zoom;
            animation-duration: 0.6s;
        }

        @keyframes zoom {
            from {
                transform: scale(0)
            }

            to {
                transform: scale(1)
            }
        }

        /* The Close Button */
        .close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
        }

            .close:hover,
            .close:focus {
                color: #bbb;
                text-decoration: none;
                cursor: pointer;
            }

        /* 100% Image Width on Smaller Screens */
        @media only screen and (max-width: 700px) {
            .modal-content {
                width: 100%;
            }
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyACuCBVPmskPtdqdP-cl9do0-W3ZEr6OVc&sensor=false" type="text/javascript"></script>
    <script type="text/javascript" src="https://api.longdo.com/map/?key=8a76770cfbc7306d00e330d581be2ad2"></script>

    <script type="text/javascript">

        var result = [
            { lat: 15.2792792792793, lng: 104.840971637079, custImg: "http://UBN.DNSDOJO.NET:82/CU/Images/V01/4123301011577.jpg", name: "ศรายุทธ การค้า", address: "91 ม.6 ต.หัวเรือ อ.เมืองอุบลราชธานี จ.อุบลราชธานี" },
            { lat: 15.3873873873874, lng: 104.839162672111, custImg: "http://UBN.DNSDOJO.NET:82/CU/Images/V01/4123301011578.jpg", name: "น้องนำโชค", address: "215 ม.11 ต.หัวเรือ อ.เมืองอุบลราชธานี จ.อุบลราชธานี" },
            { lat: 15.3398009, lng: 104.8618632, custImg: "http://UBN.DNSDOJO.NET:82/CU/Images/V01/4123301011579.jpg", name: "สุนันท์เจริญทรัพย์ พาณิชย์", address: "148 ม.2 ต.หัวเรือ อ.เมืองอุบลราชธานี จ.อุบลราชธานี" },
            { lat: 15.3333333333333, lng: 104.98014372194, custImg: "http://UBN.DNSDOJO.NET:82/CU/Images/V01/4123301012730.jpg", name: "ทวีโชค", address: "35 ม.6 ต.กระโสบ อ.เมืองอุบลราชธานี จ.อุบลราชธานี" },
            { lat: 15.2612612612613, lng: 104.88800082532, custImg: "http://UBN.DNSDOJO.NET:82/CU/Images/V01/4123301012733.jpg", name: "ปทุมวัน", address: "326 ม.1 ต.กระโสบ อ.เมืองอุบลราชธานี จ.อุบลราชธานี" }
        ];


        $(document).ready(function () { //jquery

        });

        var allData;
        function GenLocation(result) {
            var index = 0;
            var data = '';
            try {

                var map = new longdo.Map({ placeholder: document.getElementById('map_canvas') });

                //alert(result);
                allData = result;
                var row = result.split(",");
                for (var i = 0; i < row.length; i++) {
                    index = i;
                     
                    //data = row[i];
                    var columns = row[i].split("|");
                    //alert(columns);
                    var _lat = columns[0];
                    var _long = columns[1];
                    var img = columns[2];
                    var name = columns[3];
                    var adds = columns[4];
                    var markerImg = columns[5];
                    var Tel = columns[6];
                    var Seq = columns[7];

                    //var tmpImg = img.replace('/', ',');
                    var imgIndex = "ShowFullSizeImg(" + i + ")";
                    //alert(imgstr);
                    //alert(_lat);

                    if (_lat != "" && _long != "") {

                        var marker = new longdo.Marker({ lon: _long, lat: _lat },
                            {
                                title: name,
                                //icon: 'https://map.longdo.com/mmmap/images/pin_mark.png',//'pin_mark2.png',
                                //icon: {
                                //    url: 'https://map.longdo.com/mmmap/images/pin_mark.png',
                                //    offset: { x: 12, y: 45 }
                                //},
                                icon: {
                                    html: '<label style="color:red;font-weight:bold;font-size:14px;white-space:nowrap;">(' + Seq + ')</><label style="color:black;font-weight:bold;font-size:12px;white-space:nowrap;">' + name + '</><img src="MarkerImages/' + markerImg + '" alt="" />',
                                    offset: { x: 12, y: 45 }
                                },
                                detail: '<div><img src="' + img + '" alt="" height="180" width="250" style="cursor: pointer;" onclick="' + imgIndex + '" ></img></div><br/><div style="background: #eeeeff;">ที่อยู่ : ' + adds + '</div> <div style="background: #eeeeff;">เบอร์โทรศัพท์ : ' + Tel + '</div>',
                                //detail: '<div><img src="' + img + '" alt="" height="180" width="250" style="cursor: pointer;" onclick="window.open("'+img+'");" ></img></div><br/><div style="background: #eeeeff;">ที่อยู่ : ' + adds + '</div> <div style="background: #eeeeff;">เบอร์โทรศัพท์ : ' + Tel + '</div>',

                                draggable: false,
                            });
                        /*marker.setIcon('Images/pin_mark2.png')*/
                        map.Overlays.add(marker);

                        map.location({ lon: _long, lat: _lat }, true);
                        map.zoom(10, true);

                    }
                }
            } catch (e) {
                alert(e);
                //alert(data);
                //alert(index);
            }
            
        }

        function ShowFullSizeImg(imgIndex) {
            try {

                var row = allData.split(",");
                var columns = row[imgIndex].split("|");
                var _img = columns[2];

                // Get the modal
                var modal = document.getElementById("myModal");

                // Get the image and insert it inside the modal - use its "alt" text as a caption
                var img = document.getElementById("myImg");
                img.src = _img;
                var modalImg = document.getElementById("img01");
                var captionText = document.getElementById("caption");

                modal.style.display = "block";

                // Get the <span> element that closes the modal
                var span = document.getElementsByClassName("close")[0];

                // When the user clicks on <span> (x), close the modal
                span.onclick = function () {
                    modal.style.display = "none";
                }


            } catch (e) {
                alert(e);
            }
        }
    </script>

</head>
<body>


    <div id="map_canvas"></div>

    <!-- The Modal -->
    <div id="myModal" class="modal">

        <!-- The Close Button -->
        <span class="close">&times;</span>

        <!-- Modal Content (The Image) -->
        <img class="modal-content" id="myImg">

        <!-- Modal Caption (Image Text) -->
        <div id="caption"></div>
    </div>
</body>
</html>